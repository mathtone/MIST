<Project>
	<PropertyGroup>
		<MyTaskAssembly Condition="'$(TargetFrameworkIdentifier)' == '.NETFramework'">$(MSBuildThisFileDirectory)..\tools\net461\Mathtone.MIST.Builder.dll</MyTaskAssembly>
		<MyTaskAssembly Condition="'$(TargetFrameworkIdentifier)' == '.NETCoreApp' OR '$(TargetFrameworkIdentifier)' == '.NETStandard'">$(MSBuildThisFileDirectory)..\tools\netstandard2.0\Mathtone.MIST.Builder.dll</MyTaskAssembly>
	</PropertyGroup>

	<UsingTask TaskName="Mathtone.MIST.NotificationWeaverBuildTask" AssemblyFile="$(MyTaskAssembly)"/>

	<Target Name="MIST" AfterTargets="Build">
		<Message Text="Project File Name = $(MSBuildProjectFile)" Importance="high" />
		<Message Text="Project Extension = $(MSBuildProjectExtension)" Importance="high"/>
		<Message Text="Target Framework = $(TargetFrameworkIdentifier)" Importance="high"/>
		<Message Text="Task Assembly = $(MyTaskAssembly)" Importance="high"/>
		<Message Text="Target Path = $(TargetPath)" Importance="high"/>
		
		<NotificationWeaverBuildTask TargetPath="$(TargetPath)" DebugMode="True" />
	</Target>
</Project>